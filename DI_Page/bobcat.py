import read_table

registers = '''Offset Name Type Description
0x000 DEVINFO_INFO R DI Information
0x004 DEVINFO_PART R Part Info
0x008 DEVINFO_MEMINFO R Memory Info
0x00C DEVINFO_MSIZE R Memory Size
0x010 DEVINFO_PKGINFO R Misc Device Info
0x014 DEVINFO_CUSTOMINFO R Custom Part Info
0x018 DEVINFO_SWFIX R SW Fix Register
0x01C DEVINFO_SWCAPA0 R Software Restriction
0x020 DEVINFO_SWCAPA1 R Software Restriction
0x028 DEVINFO_EXTINFO R External Component Info
0x040 DEVINFO_EUI48L R EUI 48 Low
0x044 DEVINFO_EUI48H R EUI 48 High
0x048 DEVINFO_EUI64L R EUI64 Low
0x04C DEVINFO_EUI64H R EUI64 High
0x050 DEVINFO_CALTEMP R Calibration Temperature
0x054 DEVINFO_EMUTEMP R EMU Temp
0x058 DEVINFO_HFRCODPLLCALn R HFRCODPLL Calibration
0x0A0 DEVINFO_HFRCOEM23CALn R HFRCOEM23 Calibration
0x130 DEVINFO_MODULENAME0 R Module Name Information
0x134 DEVINFO_MODULENAME1 R Module Name Information
0x138 DEVINFO_MODULENAME2 R Module Name Information
0x13C DEVINFO_MODULENAME3 R Module Name Information
0x140 DEVINFO_MODULENAME4 R Module Name Information
0x144 DEVINFO_MODULENAME5 R Module Name Information
0x148 DEVINFO_MODULENAME6 R Module Name Information
0x14C DEVINFO_MODULEINFO R Module Information
0x150 DEVINFO_MODXOCAL R Module External Oscillator Calibration Information
0x180 DEVINFO_IADC0GAIN0 R IADC Gain Calibration
0x184 DEVINFO_IADC0GAIN1 R IADC Gain Calibration
0x188 DEVINFO_IADC0OFFSETCAL0 R IADC Offset Calibration
0x18C DEVINFO_IADC0NORMALOFFSETCAL0 R IADC Offset Calibration
0x190 DEVINFO_IADC0NORMALOFFSETCAL1 R IADC Offset Calibration
0x194 DEVINFO_IADC0HISPDOFFSETCAL0 R IADC Offset Calibration
0x198 DEVINFO_IADC0HISPDOFFSETCAL1 R IADC Offset Calibration
0x1FC DEVINFO_LEGACY R Legacy Device Info
0x25C DEVINFO_RTHERM R Thermistor Calibration
0x264 DEVINFO_FENOTCHCAL R FENOTCH Calibration
'''

fields = '''INFO
31:24 DEVINFOREV 0x7 R DI Page Version
23:16 PRODREV 0x0 R Production Revision
15:0 CRC 0x0 R CRC
PART
29:24 FAMILY 0x0 R Device Family
23:22 Reserved To ensure compatibility with future devices, always write Reserved bits to their reset value, unless otherwise stated. More information in 1.2 Conventions
21:16 FAMILYNUM 0x0 R Device Family
15:0 DEVICENUM 0x0 R Device Number
MEMINFO
31:16 DILEN 0x0 R Length of DI Page
15:8 UDPAGESIZE 0x0 R User Data Page Size
7:0 FLASHPAGESIZE 0x0 R Flash Page Size
MSIZE
26:16 SRAM 0x0 R Sram Size
15:0 FLASH 0x0 R Flash Size
PKGINFO
23:16 PINCOUNT 0x0 R Pin Count
15:8 PKGTYPE 0x0 R Package Type
7:0 TEMPGRADE 0x0 R Temperature Grade
'''

if '__main__' == __name__ :
    offsets = read_table.get_offsets(registers)
    print('    offsets = %s'%(offsets.__str__()))
    bits = read_table.get_bits(fields)
    print('    bits = %s'%(bits.__str__()))
else :
    offsets = {'DEVINFO_INFO': 0, 'DEVINFO_PART': 4, 'DEVINFO_MEMINFO': 8, 'DEVINFO_MSIZE': 12, 'DEVINFO_PKGINFO': 16, 'DEVINFO_CUSTOMINFO': 20, 'DEVINFO_SWFIX': 24, 'DEVINFO_SWCAPA0': 28, 'DEVINFO_SWCAPA1': 32, 'DEVINFO_EXTINFO': 40, 'DEVINFO_EUI48L': 64, 'DEVINFO_EUI48H': 68, 'DEVINFO_EUI64L': 72, 'DEVINFO_EUI64H': 76, 'DEVINFO_CALTEMP': 80, 'DEVINFO_EMUTEMP': 84, 'DEVINFO_HFRCODPLLCALn': 88, 'DEVINFO_HFRCOEM23CALn': 160, 'DEVINFO_MODULENAME0': 304, 'DEVINFO_MODULENAME1': 308, 'DEVINFO_MODULENAME2': 312, 'DEVINFO_MODULENAME3': 316, 'DEVINFO_MODULENAME4': 320, 'DEVINFO_MODULENAME5': 324, 'DEVINFO_MODULENAME6': 328, 'DEVINFO_MODULEINFO': 332, 'DEVINFO_MODXOCAL': 336, 'DEVINFO_IADC0GAIN0': 384, 'DEVINFO_IADC0GAIN1': 388, 'DEVINFO_IADC0OFFSETCAL0': 392, 'DEVINFO_IADC0NORMALOFFSETCAL0': 396, 'DEVINFO_IADC0NORMALOFFSETCAL1': 400, 'DEVINFO_IADC0HISPDOFFSETCAL0': 404, 'DEVINFO_IADC0HISPDOFFSETCAL1': 408, 'DEVINFO_LEGACY': 508, 'DEVINFO_RTHERM': 604, 'DEVINFO_FENOTCHCAL': 612}
    bits = {'INFO': {'DEVINFOREV': '31:24', 'PRODREV': '23:16', 'CRC': '15:0'}, 'PART': {'FAMILY': '29:24', 'Reserved': '23:22', 'FAMILYNUM': '21:16', 'DEVICENUM': '15:0'}, 'MEMINFO': {'DILEN': '31:16', 'UDPAGESIZE': '15:8', 'FLASHPAGESIZE': '7:0'}, 'MSIZE': {'SRAM': '26:16', 'FLASH': '15:0'}, 'PKGINFO': {'PINCOUNT': '23:16', 'PKGTYPE': '15:8', 'TEMPGRADE': '7:0'}}

